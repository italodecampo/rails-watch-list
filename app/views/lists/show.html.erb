<div class="container mt-5">
  <!-- List Title -->
  <h1 class="text-center mb-4"><%= @list.name %></h1>

  <!-- Bookmarked Movies Section -->
  <h2 class="text-white mb-3 text-center">Movies in this list</h2>

  <% if @bookmarks.any? %>
    <div class="row justify-content-center">
      <% @bookmarks.each do |bookmark| %>
        <div class="col-md-6 col-lg-4 mb-4 d-flex align-items-stretch">
          <div class="card shadow-sm w-100">
            <% if bookmark.movie.post_url.present? %>
              <%= image_tag bookmark.movie.post_url, class: "card-img-top", alt: bookmark.movie.title %>
            <% end %>
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title"><%= bookmark.movie.title %></h5>
              <p class="card-text"><%= bookmark.comment %></p>
              <%= link_to "Remove", bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-outline-danger btn-sm mt-auto" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-muted">No movies yet. Add one below!</p>
  <% end %>

  <!-- Divider -->
  <hr class="text-white">

  <!-- Inline New Bookmark Form -->
  <div class="mt-4">
    <h2 class="text-white mb-3 text-center">Add a Movie</h2>
    <%= simple_form_for [@list, @bookmark], data: { turbo: true } do |f| %>
      <div class="row">
        <div class="col-md-6 mb-2">
          <%= f.association :movie, collection: Movie.all, prompt: "Choose a movie", label: false %>
        </div>
        <div class="col-md-6 mb-2">
          <%= f.input :comment, placeholder: "Why this movie?", label: false %>
        </div>
      </div>
      <div class="text-center mt-2">
        <%= f.button :submit, "Save", class: "button" %>
      </div>
    <% end %>
  </div>

  <!-- Back Button -->
  <div class="text-center mt-4">
    <%= button_to "Back to all lists", lists_path, method: :get, class: "button" %>
  </div>
</div>
