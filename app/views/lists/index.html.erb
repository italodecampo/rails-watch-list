<div class="container-fluid home-background">
  <h1 class="text-center mb-4 text-white">"Hello I am in the TV hehe :)"</h1>

  <% if @lists.empty? %>
    <p class="text-center text-white"><strong> You have no Movie Lists.</strong></p>
    <div class="text-center">
      <%= link_to "+ Create Your First List", new_list_path, class: "btn btn-success" %>
    </div>
  <% else %>
  <div class="gallery-wrapper">
    <div class="gallery js-flickity" data-flickity-options='{ "wrapAround": true }'>
      <% @lists.each do |list| %>
        <div class="gallery-cell">
          <div class="frosted-card">
            <% if list.post_url.present? %>
              <%= image_tag list.post_url, class: "card-img-top", alt: list.name %>
            <% end %>
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title"><%= list.name %></h5>
              <%= link_to "View List", list_path(list), class: "btn btn-outline-light btn-sm mt-auto" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
    <div class="text-center mt-4">
      <%= link_to new_list_path, class: "fancy-button" do %>
        <div class="blob1"></div>
        <div class="blob2"></div>
        <div class="inner">+ Create New List</div>
      <% end %>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const gallery = document.querySelector('.gallery');
  if (!gallery) return;

  const cells = gallery.querySelectorAll('.gallery-cell');
  const flickityOptions = {
    cellAlign: 'center',
    contain: true,
    // we'll set wrapAround dynamically
  };

  if (cells.length > 3) {
    flickityOptions.wrapAround = true;
  } else {
    flickityOptions.wrapAround = false;
  }

  // Initialize Flickity
  new Flickity(gallery, flickityOptions);
});
</script>
